<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ZestCode: C:/Users/leoku/OneDrive/Personal_Coding_Projects/ZestCode/src/devices/vdml.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ZestCode
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('vdml_8c.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">vdml.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="vdml_8h_source.html">vdml/vdml.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="kapi_8h_source.html">kapi.h</a>&quot;</code><br />
<code>#include &quot;v5_api.h&quot;</code><br />
<code>#include &quot;<a class="el" href="registry_8h_source.html">vdml/registry.h</a>&quot;</code><br />
<code>#include &lt;errno.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac0a4dd723c8257decf13d08539e9e84c" id="r_ac0a4dd723c8257decf13d08539e9e84c"><td class="memItemLeft" align="right" valign="top"><a id="ac0a4dd723c8257decf13d08539e9e84c" name="ac0a4dd723c8257decf13d08539e9e84c"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>registry_init</b> ()</td></tr>
<tr class="separator:ac0a4dd723c8257decf13d08539e9e84c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96e75a6ca5696c0f58261ae0a5648b7a" id="r_a96e75a6ca5696c0f58261ae0a5648b7a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a96e75a6ca5696c0f58261ae0a5648b7a">port_mutex_init</a> ()</td></tr>
<tr class="separator:a96e75a6ca5696c0f58261ae0a5648b7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0086020993f44c165e8e2a6cd7e5eeaa" id="r_a0086020993f44c165e8e2a6cd7e5eeaa"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0086020993f44c165e8e2a6cd7e5eeaa">claim_port_try</a> (uint8_t port, v5_device_e_t type)</td></tr>
<tr class="separator:a0086020993f44c165e8e2a6cd7e5eeaa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a285725607b31dfc76174f7e4569c3f84" id="r_a285725607b31dfc76174f7e4569c3f84"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a285725607b31dfc76174f7e4569c3f84">vdml_initialize</a> ()</td></tr>
<tr class="separator:a285725607b31dfc76174f7e4569c3f84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67513439eb7264d1196f58dbaa03c847" id="r_a67513439eb7264d1196f58dbaa03c847"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a67513439eb7264d1196f58dbaa03c847">port_mutex_take</a> (uint8_t port)</td></tr>
<tr class="separator:a67513439eb7264d1196f58dbaa03c847"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af35fba308dec7fbae265a4b4586a4786" id="r_af35fba308dec7fbae265a4b4586a4786"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af35fba308dec7fbae265a4b4586a4786">internal_port_mutex_take</a> (uint8_t port)</td></tr>
<tr class="separator:af35fba308dec7fbae265a4b4586a4786"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abeb38b74fc71b8003c53e920822f7d1d" id="r_abeb38b74fc71b8003c53e920822f7d1d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abeb38b74fc71b8003c53e920822f7d1d">port_mutex_give</a> (uint8_t port)</td></tr>
<tr class="separator:abeb38b74fc71b8003c53e920822f7d1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cd0d28bdfcb9c15a2bd393a25fcb6f2" id="r_a3cd0d28bdfcb9c15a2bd393a25fcb6f2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3cd0d28bdfcb9c15a2bd393a25fcb6f2">internal_port_mutex_give</a> (uint8_t port)</td></tr>
<tr class="separator:a3cd0d28bdfcb9c15a2bd393a25fcb6f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00133d1eced9193949574829587a393d" id="r_a00133d1eced9193949574829587a393d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a00133d1eced9193949574829587a393d">port_mutex_take_all</a> ()</td></tr>
<tr class="separator:a00133d1eced9193949574829587a393d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae70eb480db1d80602e5b5f037d572d47" id="r_ae70eb480db1d80602e5b5f037d572d47"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae70eb480db1d80602e5b5f037d572d47">port_mutex_give_all</a> ()</td></tr>
<tr class="separator:ae70eb480db1d80602e5b5f037d572d47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab164b06ea2d6c77fac6d1afc8bfa78f4" id="r_ab164b06ea2d6c77fac6d1afc8bfa78f4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab164b06ea2d6c77fac6d1afc8bfa78f4">vdml_set_port_error</a> (uint8_t port)</td></tr>
<tr class="separator:ab164b06ea2d6c77fac6d1afc8bfa78f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a041f91b4d998392918864e26df946f32" id="r_a041f91b4d998392918864e26df946f32"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a041f91b4d998392918864e26df946f32">vdml_unset_port_error</a> (uint8_t port)</td></tr>
<tr class="separator:a041f91b4d998392918864e26df946f32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b8bc94d616e0f915c2930698e64c4bc" id="r_a9b8bc94d616e0f915c2930698e64c4bc"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9b8bc94d616e0f915c2930698e64c4bc">vdml_get_port_error</a> (uint8_t port)</td></tr>
<tr class="separator:a9b8bc94d616e0f915c2930698e64c4bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee1773d8eb981f08d1c33618106134ce" id="r_aee1773d8eb981f08d1c33618106134ce"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aee1773d8eb981f08d1c33618106134ce">vdml_background_processing</a> ()</td></tr>
<tr class="separator:aee1773d8eb981f08d1c33618106134ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a93dbe5adaa0d9331b7a02a713da023c1" id="r_a93dbe5adaa0d9331b7a02a713da023c1"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a93dbe5adaa0d9331b7a02a713da023c1">port_errors</a></td></tr>
<tr class="separator:a93dbe5adaa0d9331b7a02a713da023c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a234bd81f117a6313d45285d9fb6745f0" id="r_a234bd81f117a6313d45285d9fb6745f0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__c-rtos.html#gab15ea84d90257d70b44e8e04519864d2">mutex_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a234bd81f117a6313d45285d9fb6745f0">port_mutexes</a> [V5_MAX_DEVICE_PORTS]</td></tr>
<tr class="separator:a234bd81f117a6313d45285d9fb6745f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90d1eabbf9b0d96290279cd8fce35877" id="r_a90d1eabbf9b0d96290279cd8fce35877"><td class="memItemLeft" align="right" valign="top"><a id="a90d1eabbf9b0d96290279cd8fce35877" name="a90d1eabbf9b0d96290279cd8fce35877"></a>
<a class="el" href="structx_s_t_a_t_i_c___q_u_e_u_e.html">static_sem_s_t</a>&#160;</td><td class="memItemRight" valign="bottom"><b>port_mutex_bufs</b> [V5_MAX_DEVICE_PORTS]</td></tr>
<tr class="separator:a90d1eabbf9b0d96290279cd8fce35877"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>VDML - VEX Data Management Layer</p>
<p>VDML ensures thread saftey for operations on smart devices by maintaining an array of RTOS Mutexes and implementing functions to take and give them.</p>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (c) 2017-2024, Purdue University ACM SIGBots.</dd></dl>
<p>This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0. If a copy of the MPL was not distributed with this file, You can obtain one at <a href="http://mozilla.org/MPL/2.0/">http://mozilla.org/MPL/2.0/</a>. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a0086020993f44c165e8e2a6cd7e5eeaa" name="a0086020993f44c165e8e2a6cd7e5eeaa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0086020993f44c165e8e2a6cd7e5eeaa">&#9670;&#160;</a></span>claim_port_try()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t claim_port_try </td>
          <td>(</td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>port</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">v5_device_e_t</td>          <td class="paramname"><span class="paramname"><em>type</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A function that executes claim_port and allows you to execute a block of code if an error occurs.</p>
<p>This function uses the following values of errno when an error state is reached: ENXIO - The given value is not within the range of V5 ports (1-21). EACCES - Another resource is currently trying to access the port.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">port</td><td>The V5 port number from 0-20 </td></tr>
    <tr><td class="paramname">device_type</td><td>The v5_device_e_t that the port is configured as</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 if the operation was successful or 0 if the operation failed, setting errno. </dd></dl>

</div>
</div>
<a id="a3cd0d28bdfcb9c15a2bd393a25fcb6f2" name="a3cd0d28bdfcb9c15a2bd393a25fcb6f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3cd0d28bdfcb9c15a2bd393a25fcb6f2">&#9670;&#160;</a></span>internal_port_mutex_give()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int internal_port_mutex_give </td>
          <td>(</td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>port</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns a port mutex with bounds checking for V5_MAX_PORTS (32) not user exposed device ports (20). Intended for internal usage for protecting thread-safety on devices such as the controller and battery</p>
<p>This function uses the following values of errno when an error state is reached: ENXIO - The given value is not within the range of V5 ports (0-32).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">port</td><td>The V5 port number from 0-32</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if the mutex was successfully returned, false otherwise. If false is returned, then errno is set with a hint about why the mutex couldn't be returned. </dd></dl>

</div>
</div>
<a id="af35fba308dec7fbae265a4b4586a4786" name="af35fba308dec7fbae265a4b4586a4786"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af35fba308dec7fbae265a4b4586a4786">&#9670;&#160;</a></span>internal_port_mutex_take()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int internal_port_mutex_take </td>
          <td>(</td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>port</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Obtains a port mutex with bounds checking for V5_MAX_PORTS (32) not user exposed device ports (20). Intended for internal usage for protecting thread-safety on devices such as the controller and battery</p>
<p>This function uses the following values of errno when an error state is reached: ENXIO - The given value is not within the range of V5 ports (0-32).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">port</td><td>The V5 port number from 0-32</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if the mutex was successfully taken, false otherwise. If false is returned, then errno is set with a hint about why the the mutex couldn't be taken. </dd></dl>

</div>
</div>
<a id="abeb38b74fc71b8003c53e920822f7d1d" name="abeb38b74fc71b8003c53e920822f7d1d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abeb38b74fc71b8003c53e920822f7d1d">&#9670;&#160;</a></span>port_mutex_give()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int port_mutex_give </td>
          <td>(</td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>port</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the mutex for the given port.</p>
<p>Frees the mutex for this port, allowing other tasks to continue.</p>
<p>WARNING: If a mutex was claimed by a task, this MUST be called immediately after the port is no longer needed by that task in order to prevent delays in other tasks.</p>
<p>This function uses the following values of errno when an error state is reached: ENXIO - The given value is not within the range of V5 ports (0-20).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">port</td><td>The V5 port number to free from 0-20 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae70eb480db1d80602e5b5f037d572d47" name="ae70eb480db1d80602e5b5f037d572d47"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae70eb480db1d80602e5b5f037d572d47">&#9670;&#160;</a></span>port_mutex_give_all()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void port_mutex_give_all </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Executes <a class="el" href="vdml_8h.html#abeb38b74fc71b8003c53e920822f7d1d">port_mutex_give()</a> for all of the V5 Smart Ports. </p>

</div>
</div>
<a id="a96e75a6ca5696c0f58261ae0a5648b7a" name="a96e75a6ca5696c0f58261ae0a5648b7a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96e75a6ca5696c0f58261ae0a5648b7a">&#9670;&#160;</a></span>port_mutex_init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void port_mutex_init </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel extern">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Initializes the mutexes for the motor ports.</p>
<p>Initializes a static array of FreeRTOS mutexes to protect against race conditions. For example, we don't want the Background processing task to run at the same time that we set a motor, because bad information may be returned, or worse. </p>

</div>
</div>
<a id="a67513439eb7264d1196f58dbaa03c847" name="a67513439eb7264d1196f58dbaa03c847"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67513439eb7264d1196f58dbaa03c847">&#9670;&#160;</a></span>port_mutex_take()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int port_mutex_take </td>
          <td>(</td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>port</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Claims the mutex for the given port.</p>
<p>Reserves the mutex for this port. Any other tasks trying to access this port will block until the mutex is returned. If a higher-priortiy task attempts to claim this port, the task which has the port claimed will temporarily be raised to an equal priority until the mutex is given, reducing the impact of the delay. See FreeRTOS documentation for more details.</p>
<p>This MUST be called before any call to the v5 api to maintain thread saftey.</p>
<p>This function uses the following values of errno when an error state is reached: ENXIO - The given value is not within the range of V5 ports (0-20).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">port</td><td>The V5 port number to claim from 0-20</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 if the mutex was successfully taken, 0 if not, -1 if port is invalid. </dd></dl>

</div>
</div>
<a id="a00133d1eced9193949574829587a393d" name="a00133d1eced9193949574829587a393d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00133d1eced9193949574829587a393d">&#9670;&#160;</a></span>port_mutex_take_all()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void port_mutex_take_all </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Executes <a class="el" href="vdml_8h.html#a67513439eb7264d1196f58dbaa03c847">port_mutex_take()</a> for all of the V5 Smart Ports. </p>

</div>
</div>
<a id="aee1773d8eb981f08d1c33618106134ce" name="aee1773d8eb981f08d1c33618106134ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee1773d8eb981f08d1c33618106134ce">&#9670;&#160;</a></span>vdml_background_processing()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vdml_background_processing </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Background processing function for the VDML system.</p>
<p>This function should be called by the system daemon approximately every 2 milliseconds.</p>
<p>Updates the registry type array, detecting what devices are actually plugged in according to the system, then compares that with the registry records.</p>
<p>On warnings, no operation is performed. </p>

</div>
</div>
<a id="a9b8bc94d616e0f915c2930698e64c4bc" name="a9b8bc94d616e0f915c2930698e64c4bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b8bc94d616e0f915c2930698e64c4bc">&#9670;&#160;</a></span>vdml_get_port_error()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool vdml_get_port_error </td>
          <td>(</td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>port</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Gets the error bit for the port, indicating whether or not there has been an error on this port.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">port</td><td>The V5 port number to check from 0-20</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if the port's bit is set, false otherwise. </dd></dl>

</div>
</div>
<a id="a285725607b31dfc76174f7e4569c3f84" name="a285725607b31dfc76174f7e4569c3f84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a285725607b31dfc76174f7e4569c3f84">&#9670;&#160;</a></span>vdml_initialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vdml_initialize </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Shorcut to initialize all of VDML (mutexes and register) </p>

</div>
</div>
<a id="ab164b06ea2d6c77fac6d1afc8bfa78f4" name="ab164b06ea2d6c77fac6d1afc8bfa78f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab164b06ea2d6c77fac6d1afc8bfa78f4">&#9670;&#160;</a></span>vdml_set_port_error()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vdml_set_port_error </td>
          <td>(</td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>port</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets the port's bit to 1, indicating there has already been an error on this port.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">port</td><td>The V5 port number to set from 0-20 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a041f91b4d998392918864e26df946f32" name="a041f91b4d998392918864e26df946f32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a041f91b4d998392918864e26df946f32">&#9670;&#160;</a></span>vdml_unset_port_error()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vdml_unset_port_error </td>
          <td>(</td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>port</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets the port's bit to 0, effectively resetting it.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">port</td><td>The V5 port number to unset from 0-20 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a93dbe5adaa0d9331b7a02a713da023c1" name="a93dbe5adaa0d9331b7a02a713da023c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93dbe5adaa0d9331b7a02a713da023c1">&#9670;&#160;</a></span>port_errors</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t port_errors</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Bitmap to indicate if a port has had an error printed or not. </p>

</div>
</div>
<a id="a234bd81f117a6313d45285d9fb6745f0" name="a234bd81f117a6313d45285d9fb6745f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a234bd81f117a6313d45285d9fb6745f0">&#9670;&#160;</a></span>port_mutexes</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__c-rtos.html#gab15ea84d90257d70b44e8e04519864d2">mutex_t</a> port_mutexes[V5_MAX_DEVICE_PORTS]</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>We have V5_MAX_DEVICE_PORTS so that we can do thread safety on things like controllers, batteries which are sort of like smart devices internally to the V5 </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_6fac9273c1f4413d2ee63ba6cd0b0eb2.html">devices</a></li><li class="navelem"><a class="el" href="vdml_8c.html">vdml.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
